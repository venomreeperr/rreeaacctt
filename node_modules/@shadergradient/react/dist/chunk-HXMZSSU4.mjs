import{a as v,b as r}from"./chunk-F3ULA5MU.mjs";import{a as n}from"./chunk-7RJG5BRD.mjs";import{useEffect as k,useMemo as U,useRef as h}from"react";import*as l from"three";import{useFrame as B}from"@react-three/fiber";import{jsx as V}from"react/jsx-runtime";var A=({animate:g,range:N,rangeStart:m,rangeEnd:E,loop:j,loopDuration:f,reflection:R,uniforms:D,vertexShader:H,fragmentShader:M,onInit:T,shader:b})=>{let p=h(new l.Clock),e=U(()=>{let s=Object.entries(D),L=D.colors,t=v(L[0]),a=v(L[1]),u=v(L[2]),w={uC1r:{value:r(t==null?void 0:t.r)},uC1g:{value:r(t==null?void 0:t.g)},uC1b:{value:r(t==null?void 0:t.b)},uC2r:{value:r(a==null?void 0:a.r)},uC2g:{value:r(a==null?void 0:a.g)},uC2b:{value:r(a==null?void 0:a.b)},uC3r:{value:r(u==null?void 0:u.r)},uC3g:{value:r(u==null?void 0:u.g)},uC3b:{value:r(u==null?void 0:u.b)}},F=s.reduce((o,[y,O])=>{let P=l.UniformsUtils.clone({[y]:{value:O}});return n(n({},o),P)},{}),i={userData:F,metalness:b==="glass"?0:.2,roughness:b==="glass"?.1:1-(typeof R=="number"?R:.1),side:l.DoubleSide,onBeforeCompile:o=>{o.uniforms=n(n(n({},o.uniforms),F),w),o.vertexShader=H,o.fragmentShader=M}};b==="glass"&&(i.transparent=!0,i.opacity=.3,i.transmission=.9,i.thickness=.5,i.clearcoat=1,i.clearcoatRoughness=0,i.ior=1.5,i.envMapIntensity=1);let c=new l.MeshPhysicalMaterial(i);return s.forEach(([o])=>Object.defineProperty(c,o,{get:()=>c.uniforms[o].value,set:y=>c.uniforms[o].value=y})),T&&T(c),c},[D,H,M,T,R,b]);return k(()=>()=>{e.dispose()},[e]),k(()=>{g==="on"?p.current.start():p.current.stop()},[g]),B(()=>{if(g==="on"&&e.userData.uTime){let s=p.current.getElapsedTime();j==="on"&&Number.isFinite(f)&&f>0?(s=s%f,e.userData.uLoop&&(e.userData.uLoop.value=1),e.userData.uLoopDuration&&(e.userData.uLoopDuration.value=f)):(e.userData.uLoop&&(e.userData.uLoop.value=0),N==="enabled"&&Number.isFinite(m)&&Number.isFinite(E)&&E>m&&(s=m+s,s>=E&&(s=m,p.current.start()))),e.userData.uTime.value=s}}),V("primitive",{attach:"material",object:e})};export{A as a};
