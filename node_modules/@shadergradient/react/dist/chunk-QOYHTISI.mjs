import{b as h,c as A,d as g}from"./chunk-DTOHMYM5.mjs";import{a as u,b as L,c as R}from"./chunk-7RJG5BRD.mjs";import*as t from"react";import{Vector2 as S,Vector3 as V,Color as v}from"three";import{useThree as D}from"@react-three/fiber";import{jsx as M,jsxs as E}from"react/jsx-runtime";var G=t.forwardRef(function(j,C){var b=j,{points:i,color:d="black",vertexColors:n,linewidth:s,lineWidth:p,dashed:c}=b,f=R(b,["points","color","vertexColors","linewidth","lineWidth","dashed"]);let y=D(a=>a.size),[m]=t.useState(()=>new g),[o]=t.useState(()=>new A),l=t.useMemo(()=>{let a=new h,P=i.map(e=>{let r=Array.isArray(e);return e instanceof V?[e.x,e.y,e.z]:e instanceof S?[e.x,e.y,0]:r&&e.length===3?[e[0],e[1],e[2]]:r&&e.length===2?[e[0],e[1],0]:e});if(a.setPositions(P.flat()),n){let e=n.map(r=>r instanceof v?r.toArray():r);a.setColors(e.flat())}return a},[i,n]);return t.useLayoutEffect(()=>{m.computeLineDistances()},[i,m]),t.useLayoutEffect(()=>{c?o.defines.USE_DASH="":delete o.defines.USE_DASH,o.needsUpdate=!0},[c,o]),t.useEffect(()=>()=>l.dispose(),[l]),E("primitive",L(u({object:m,ref:C},f),{children:[M("primitive",{object:l,attach:"geometry"}),M("primitive",u({object:o,attach:"material",color:d,vertexColors:!!n,resolution:[y.width,y.height],linewidth:s!=null?s:p,dashed:c},f))]}))});export{G as a};
